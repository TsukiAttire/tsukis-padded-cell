<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Snake</title>
  <link rel="stylesheet" href="../styles.css">
</head>
<body>

<div class="card">
  <div class="profile">
    <h1>Snake</h1>
    <canvas id="game" width="300" height="300"></canvas>
    <p class="bio">arrow keys</p>

    <div class="links">
      <a onclick="location.reload()">Restart</a>
      <a href="games.html">Back</a>
    </div>
  </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let snake = [{x: 150, y: 150}];
let food = {x: 60, y: 60};
let dx = 10, dy = 0;

document.addEventListener("keydown", e => {
  if (e.key === "ArrowUp" && dy === 0) dx = 0, dy = -10;
  if (e.key === "ArrowDown" && dy === 0) dx = 0, dy = 10;
  if (e.key === "ArrowLeft" && dx === 0) dx = -10, dy = 0;
  if (e.key === "ArrowRight" && dx === 0) dx = 10, dy = 0;
});

function loop() {
  ctx.clearRect(0,0,300,300);
  const head = {x: snake[0].x + dx, y: snake[0].y + dy};
  snake.unshift(head);

  if (head.x === food.x && head.y === food.y) {
    food.x = Math.floor(Math.random()*30)*10;
    food.y = Math.floor(Math.random()*30)*10;
  } else snake.pop();

  ctx.fillStyle = "#111";
  snake.forEach(p => ctx.fillRect(p.x,p.y,10,10));
  ctx.fillRect(food.x,food.y,10,10);

  if (head.x<0||head.y<0||head.x>=300||head.y>=300)
    snake=[{x:150,y:150}],dx=10,dy=0;
}

setInterval(loop,120);
</script>

</body>
</html>
